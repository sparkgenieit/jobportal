import{j as e,M as w,r as c,e as I,c as L,b,h as y,i as f,L as T,P as _,Q as E}from"./index-DW7Jtefv.js";import{u as k,d as M}from"./index-BjWyLh7X.js";import{D as B}from"./DataTable-BTDeVrp7.js";function U({showModal:a,onHideModal:l,confirmText:d,buttonAttributes:t,confirmTextClasses:p}){return e.jsx(w,{show:a,onHide:l,centered:!0,children:e.jsxs(w.Body,{className:"bg-white",children:[e.jsx("div",{className:p,children:d}),e.jsx("div",{className:"flex justify-center gap-3",children:t==null?void 0:t.map(({text:x,onClick:n,...h},o)=>e.jsx("button",{type:"button",onClick:n,...h,children:x},o))})]})})}function F({name:a,setName:l,setPgNumber:d}){return e.jsx("input",{type:"text",placeholder:"Search by job title or reference",className:"form-control my-3 shadow",value:a,onChange:t=>{l(t.target.value),d(1),window.history.replaceState(null,null,"/ads")}})}function q({role:a}){console.log(a);const[l,d]=c.useState(0),[t,p]=c.useState(null),[x]=I(),[n,h]=c.useState(+x.get("page")||1),[o,S]=c.useState(""),[A,i]=c.useState(!1),{_id:j}=L(),r=k(),N=b();c.useEffect(()=>{document.title="Posted Ads",g(n)},[o,n]);const g=async s=>{i(!0);const u=(s-1)*f;let D=a==="SuperAdmin"?`/companies/postedAds/all?limit=${f}&skip=${u}&name=${o}`:`/companies/postedAds/${j}?limit=${f}&skip=${u}&name=${o}`;try{const{data:m}=await y.get(D);d(m.total),p(m.ads)}catch(m){console.error(m),p([]),r({status:"error",error:m})}finally{i(!1)}},P=s=>{N(E({...s})),r({path:`/company/ads/post/${s.type}/?c=${s._id}`})},$=s=>{console.log(s),r({path:`/company/ads/editad/${s._id}`})},C=async s=>{i(!0);try{await y.delete(`/ads/delete/${s._id}`),r({status:"success",message:"Ad deleted successfully"}),g(n)}catch{r({status:"error",error:{message:"Failed to delete the ad, please try again"}})}finally{i(!1)}},v=async s=>{try{await y.patch("/ads/ad",{userId:j,adId:s._id}),r({status:"success",message:"Ad Closed"}),g(n)}catch(u){console.error(u)}finally{i(!1)}};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"content-wrapper px-0 bg-white",children:[e.jsx("h4",{className:"text-center fs-4 fw-bold",children:"List of Posted Ads"}),e.jsx(M,{itemsPerPage:f,currentPage:n,setCurrentPage:h,totalCount:l,fetchItems:g,pageNumberToShow:2,children:e.jsxs("div",{className:"bg-white rounded",children:[e.jsx(F,{name:o,setName:S,setPgNumber:h}),A?e.jsx(T,{}):t?e.jsx(B,{dataType:"Ad",items:t,handleDuplicate:P,closeAction:a!=="SuperAdmin"?v:null,handleDelete:a!=="SuperAdmin"?C:null,goToEdit:$,columns:_}):null]})})]})})}export{q as A,U as C};

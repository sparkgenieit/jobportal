import{u as k,r as d,a as W,b as J,c as S,j as e,R as Q,s as E,d as X,I as Z,M,h as C,e as _,f as $,p as ee,k as L,i as I,L as se,y as te,z as ae,A as j}from"./index-DW7Jtefv.js";import{H as T,F as ne}from"./ShowMore-aN4txTUv.js";import{m as oe,G as re,C as ie,a as le,f as B,P as H,c as v,i as U,d as ce,H as de,A as he,g as me,I as xe,h as ue,T as je,B as pe}from"./Audit-Log-CPX_DfGc.js";import{C as fe}from"./ChatPage-D1pqQtkj.js";import{T as be,a as O,b as ge,c as ye,P as R,u as P,g as we,d as Ne,N as ve}from"./index-BjWyLh7X.js";import{r as a,A as N}from"./recruiterUrls.service-oV-lWMCy.js";import{R as z,D as Ce}from"./DataTable-BTDeVrp7.js";import"./index-CU5ar2BV.js";function Je(){var y,b;const t=k(w=>w.general.isSidebarOpen),p=k(w=>w.mailCount.EmployerUnreadCount),[l,m]=d.useState(!1),h=W(),i=J(),n=S(),o=((y=n==null?void 0:n.companyId)==null?void 0:y.credits)||0,r=((b=n==null?void 0:n.companyId)==null?void 0:b.usedFreeCredit)||!1,s=(w="")=>{window.innerWidth<1024&&i(E(!1)),h(a.home+w)},c=()=>{o===0&&!r||o===0&&r?m(!0):s(a.postJob)},u=()=>{m(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`border shadow ${t?"sidebar-showing":"sidebar-not-showing"}`,children:e.jsxs("nav",{className:"sidebar",id:"sidebar",children:[e.jsx("div",{className:"  mt-4 pe-1 d-flex justify-content-end d-none d-lg-flex",children:e.jsx(be,{tooltipText:"Menu",children:e.jsx("a",{className:"pe-2",type:"button",children:e.jsx("span",{onClick:()=>i(E()),children:e.jsx(Q,{size:"20px"})})})})}),e.jsxs("ul",{className:"nav",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("div",{role:"button",onClick:()=>s(),className:"nav-link d-flex justify-content-between w-100",children:[e.jsx("span",{children:"Dashboard"}),e.jsx("span",{children:e.jsx(X,{size:"20"})})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("div",{role:"button",onClick:()=>s(a.inbox),className:"d-flex nav-link justify-content-between align-items-center w-100",children:[e.jsxs("span",{children:["Mail",p>0&&e.jsx("span",{className:" ps-3 text-danger",children:p})]}),e.jsx("span",{children:e.jsx(Z,{size:"22"})})]})}),e.jsxs(N,{alwaysOpen:!0,children:[e.jsxs(N.Item,{eventKey:"0",children:[e.jsx(N.Header,{children:e.jsx("span",{className:"ps-2 fst-normal",children:"Jobs"})}),e.jsx(N.Body,{children:e.jsxs("ul",{className:"list-unstyled d-flex flex-column gap-3",children:[e.jsx("li",{children:e.jsxs("div",{role:"button",onClick:()=>s(a.buyCredits),className:"d-flex   flex-column w-100",children:[e.jsxs("div",{className:"d-flex  justify-content-between w-100",children:[e.jsx("span",{children:"Buy Credits"}),e.jsx("span",{children:e.jsx(O,{size:"20"})})]}),e.jsxs("div",{className:"text-secondary small",children:["Available Credits: ",o||0]})]})}),e.jsx("li",{role:"button",onClick:()=>{c()},children:e.jsxs("span",{className:"d-flex justify-content-between w-100",children:[e.jsx("span",{children:"Post a Job"}),e.jsx("span",{children:e.jsx(ge,{size:"20"})})]})}),e.jsx("li",{children:e.jsxs("div",{role:"button",onClick:()=>s(a.postedJobs),className:"d-flex justify-content-between w-100",children:[e.jsx("span",{children:"Posted Jobs"}),e.jsx("span",{children:e.jsx(ye,{size:"20"})})]})}),e.jsx("li",{children:e.jsxs("div",{role:"button",onClick:()=>s(a.transactions),className:"d-flex  justify-content-between align-items-center w-100",children:[e.jsx("span",{children:"Transactions"}),e.jsx("span",{children:e.jsx(R,{size:"22"})})]})}),e.jsx("li",{children:e.jsxs("div",{role:"button",onClick:()=>s(a.audit),className:"d-flex justify-content-between align-items-center w-100",children:[e.jsx("span",{children:"Audit Log"}),e.jsx("span",{children:e.jsx(T,{size:"22"})})]})})]})})]}),e.jsxs(N.Item,{eventKey:"1",children:[e.jsx(N.Header,{children:e.jsx("span",{className:"ps-2",children:"Advertisements"})}),e.jsx(N.Body,{children:e.jsxs("ul",{className:"list-unstyled d-flex flex-column gap-3",children:[e.jsx("li",{children:e.jsxs("div",{role:"button",onClick:()=>s(),className:"d-flex   flex-column w-100",children:[e.jsxs("div",{className:"d-flex  justify-content-between w-100",children:[e.jsx("span",{children:"Ad Credits"}),e.jsx("span",{children:e.jsx(O,{size:"20"})})]}),e.jsxs("div",{className:"text-secondary small",children:["Available Credits: ",0]})]})}),e.jsx("li",{role:"button",children:e.jsxs("span",{className:"d-flex justify-content-between w-100",children:[e.jsx("span",{children:"Post an Ad"}),e.jsx("span",{children:e.jsx(z,{size:"20"})})]})}),e.jsx("li",{children:e.jsxs("div",{role:"button",onClick:()=>s(),className:"d-flex justify-content-between w-100",children:[e.jsx("span",{children:"Posted Ads"}),e.jsx("span",{children:e.jsx(z,{size:"20"})})]})}),e.jsx("li",{children:e.jsxs("div",{role:"button",onClick:()=>s(),className:"d-flex  justify-content-between align-items-center w-100",children:[e.jsx("span",{children:"Ad Transactions"}),e.jsx("span",{children:e.jsx(R,{size:"22"})})]})}),e.jsx("li",{children:e.jsxs("div",{role:"button",onClick:()=>s(),className:"d-flex justify-content-between align-items-center w-100",children:[e.jsx("span",{children:"Ad Audit Log"}),e.jsx("span",{children:e.jsx(T,{size:"22"})})]})})]})})]})]})]})]})}),e.jsx(M,{show:l,onHide:u,centered:!0,children:e.jsxs(M.Body,{children:[o===0&&!r&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex flex-column align-items-center gap-2 p-2",children:[e.jsx("h3",{children:"POST A JOB FOR FREE"}),e.jsx("div",{children:e.jsx("img",{style:{width:"200px"},src:"/assets/images/free-job.gif",alt:"free-job"})}),e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("p",{children:" You can post the first job for free"}),e.jsx("p",{children:" For your next job you need to buy credits"})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",onClick:()=>{u(),s(a.postJob)},className:"btn btn-info",children:"Post a Job"})})]})}),o===0&&r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"form-row ml-5",children:e.jsx("div",{className:"form-group",children:e.jsx("div",{className:"form-group",children:e.jsx("div",{className:"form-check ml-2",children:e.jsx("label",{className:"form-check-label",children:e.jsx("span",{children:"Not Enough Credits"})})})})})}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("button",{type:"button",onClick:()=>{u(),s(a.buyCredits)},className:"btn btn-danger rounded-3",children:"Buy Credits"})})]})]})})]})}const A=new Date,D=A.getFullYear(),Se=[D-3,D-2,D-1,D];function Pe(){const[t,p]=d.useState(null),[l,m]=d.useState(A.getMonth()),[h,i]=d.useState(A.getFullYear()),n=P(),o=r=>s=>r(s.target.value);return d.useEffect(()=>{document.title="Dashboard"},[]),d.useEffect(()=>{(async()=>{try{const s={month:l,year:h},{data:c}=await ie.getRecruiterGraphs(s);p(c)}catch(s){n({status:"error",error:s})}})()},[h,l]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"px-3 responsive-font mt-4",children:[e.jsx("h3",{className:"text-center fw-bold fs-4",children:"Jobs Dashboard"}),e.jsxs("div",{className:"d-flex flex-column flex-md-row gap-3 my-4",children:[e.jsxs("div",{className:"d-flex gap-3 align-items-center",children:[e.jsx("label",{children:"Year"}),e.jsxs("select",{className:"form-select",value:h,onChange:o(i),name:"year",children:[e.jsx("option",{value:""}),Se.map((r,s)=>e.jsx("option",{value:r,children:r},s))]})]}),e.jsxs("div",{className:"d-flex gap-3 align-items-center",children:[e.jsx("label",{children:"Month"}),e.jsxs("select",{className:"form-select",value:l,onChange:o(m),name:"month",children:[e.jsx("option",{value:""}),oe.map((r,s)=>e.jsx("option",{value:s,children:r},r))]})]})]}),e.jsx(re,{graphsData:t,month:l,year:h})]})})}function Fe(){const t=S(),p={name:t.name,email:t.email,organisation:t.companyId.first_name+" "+t.companyId.last_name},l=P();d.useEffect(()=>{document.title="Employer | Contact-us"},[]);const m=async h=>{const i=`${t.name}(${t.companyId.first_name+" "+t.companyId.last_name})`,n={subject:h.subject,participants:[t._id],chat:[{date:new Date,from:i,message:h.message,by:"employer"}],readBy:[t._id]};try{await C.post("/mails/employer/create",n),l({status:"success",message:"Mail Sent",path:a.home+a.inbox})}catch(o){l({status:"error",error:o})}};return e.jsxs("div",{className:"mt-5 container-fluid",children:[e.jsx("h2",{className:" text-center",children:"Contact us"}),e.jsx(le,{onSubmit:m,data:p})]})}function De(){const t=k(u=>u.general.currentJob),[p]=_(),[l,m]=d.useState(null),h=J(),i=S(),n=i.companyId._id,o=P(),r=p.get("c");d.useEffect(()=>{document.title="Post a Job",r?(m({...t,creationdate:new Date,closedate:we(new Date().toString())}),t!=null&&t.other_benefits&&setShowOthersBenefits(!0)):B(n,m,U)},[]);const s=async u=>{await B(n,u,U),window.scrollTo({top:20,behavior:"smooth"}),setShowOthersBenefits(!1)},c=async u=>{u.employer=i.name,u.companyId=n,u.posted_by=i._id;try{await C.post("/jobs/create",u),o({status:"Success",message:"Job Posted Successfully",path:v.getUrl(v.postedJobs)}),h($())}catch(y){o({status:"error",error:y})}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"content-wrapper bg-white",children:[e.jsx("h3",{className:"fs-4 fw-bold text-center",children:" Post a Job "}),e.jsx("div",{className:"row",children:e.jsx("div",{className:" bg-white",children:l&&e.jsx(H,{showButton:!!r,btnOnClick:s,btnText:"Discard",initialValues:l,onFormSubmit:c})})})]})})})}function Ie(){const[t,p]=d.useState(null),l=ee(),[m]=_(),h=J(),i=S(),n=P();d.useEffect(()=>{document.title="Edit Job",ce(l.id,p,m.get("repost")==="true").then(s=>{s.other_benefits&&setShowOthersBenefits(!0)})},[]);const o=()=>{h(L({...t}));const s=v.getUrl(v.postJob)+"?c="+t._id;n({path:s}),window.scrollTo({top:20,behavior:"smooth"})},r=async s=>{s.employer=i.name,s.companyId=i.companyId._id,s.posted_by=i._id;try{const c=await C.put(`/jobs/update/${l.id}`,s);c&&c.status&&n({status:"Success",message:"Updated Successfully",path:v.getUrl(v.postedJobs)})}catch(c){n({status:"error",error:c})}h($()),window.scrollTo({top:40,behavior:"smooth"})};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"content-wrapper bg-white",children:[e.jsx("h3",{className:"fs-4 fw-bold text-center",children:" Edit Job "}),e.jsx("div",{className:"row",children:e.jsx("div",{className:" bg-white",children:t&&e.jsx(H,{initialValues:t,onFormSubmit:r,showButton:!0,btnOnClick:o,btnText:"Duplicate Job"})})})]})})}function ke(){const[t,p]=d.useState(0),[l,m]=d.useState(null),[h]=_(),[i,n]=d.useState(+h.get("page")||1),[o,r]=d.useState(""),[s,c]=d.useState(!1),y=S().companyId._id,b=P(),w=J();d.useEffect(()=>{document.title="Posted Jobs",F(i)},[o]);const Y=x=>{w(L({...x})),b({path:`/recruiter/postajob?c=${x._id}`})},F=async x=>{c(!0);const g=(x-1)*I;try{const{data:f}=await C.get(`/companies/postedJobs/${y}?limit=${I}&skip=${g}&name=${o}`);p(f.total),m(f.jobs)}catch(f){console.log(f),m([]),b({status:"error",error:f})}finally{c(!1)}},G=x=>{const g=`/recruiter/editjob/${x._id}`;b({path:g})},V=(x,g)=>{let f=`/recruiter/applied-users/${x._id}`;g&&(f=f+"?s=true"),b({path:f})},K=async x=>{c(!0);try{await C.delete(`jobs/delete/${x._id}`),c(!1),setModal({show:!1}),b({status:"success",message:"Job deleted"}),F(i)}catch{c(!1),setModal({show:!1}),b({status:"error",error:{message:"Failed to delete the job, Please try again later"}})}},q=async x=>{const g={userId:y,jobId:x._id};try{const f=await C.patch("/jobs/close",g);c(!1),setModal({show:!1}),b({status:"success",message:"Job Closed"}),F(i)}catch{c(!1),setModal({show:!1})}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"content-wrapper px-0 bg-white",children:[e.jsx("h4",{className:"text-center fs-4 fw-bold ",children:"List of Posted Jobs"}),e.jsx(Ne,{itemsPerPage:I,currentPage:i,setCurrentPage:n,totalCount:t,fetchItems:F,pageNumberToShow:2,children:e.jsxs("div",{className:"bg-white rounded ",children:[e.jsx("input",{type:"text",placeholder:"Search by job title or reference",className:"form-control my-3 shadow",value:o,onChange:x=>{r(x.target.value),n(1),window.history.replaceState(null,null,"/recruiter/jobs")}}),s&&e.jsx(se,{}),!s&&l&&e.jsx(Ce,{dataType:"Job",jobs:l,handleDuplicate:Y,closeAction:q,handleDelete:K,getAppliedUsers:V,goToEdit:G})]})})]})})})}function Re(){const t=J();return d.useEffect(()=>{t(te())},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container-scroller",children:[e.jsx(de,{}),e.jsxs("div",{className:"container-fluid page-body-wrapper",children:[e.jsx(Je,{}),e.jsxs(ae,{children:[e.jsx(j,{index:!0,element:e.jsx(Pe,{})}),e.jsx(j,{path:a.postJob,element:e.jsx(De,{})}),e.jsx(j,{path:a.editJob,element:e.jsx(Ie,{})}),e.jsx(j,{path:a.postedJobs,element:e.jsx(ke,{})}),e.jsx(j,{path:a.appliedUsers,element:e.jsx(he,{})}),e.jsx(j,{path:a.appliedUserProfile,element:e.jsx(me,{})}),e.jsx(j,{path:a.companyContact,element:e.jsx(Fe,{})}),e.jsx(j,{path:a.inbox,element:e.jsx(xe,{})}),e.jsx(j,{path:a.inboxDetails,element:e.jsx(fe,{name:"Enquirer"})}),e.jsx(j,{path:a.audit,element:e.jsx(ue,{})}),e.jsx(j,{path:a.transactions,element:e.jsx(je,{})}),e.jsx(j,{path:a.buyCredits,element:e.jsx(pe,{})}),e.jsx(j,{path:"*",element:e.jsx(ve,{})})]})]}),e.jsx(ne,{})]})})}export{Re as default};

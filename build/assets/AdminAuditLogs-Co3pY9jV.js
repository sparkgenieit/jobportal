import{r as n,j as e,B,M as U,h as w,p as Q,S as H,T as Y,e as P,b as Z,c as $,i as C,E as X,L as z,U as ee,G as se,m as O,n as q}from"./index-DW7Jtefv.js";import{E as te,G as ae,H as ne,I as re,J as le,T,K as ce,L as oe,M as de,l as ie,p as me,m as he,k as xe,u as R,i as I,O as ue,Q as pe,v as M,d as _,n as V,R as je,F as W}from"./index-BjWyLh7X.js";import{M as K,S as G}from"./ShowMore-aN4txTUv.js";import{d as k}from"./csvFunctions-zqwoPGxM.js";function Ne({jobview:t,handleApprove:m,setShow:v}){var f,y,p,r;const[a,h]=n.useState({}),x=(N,b)=>{h({[b]:N})},u=new Date(t.creationdate).toLocaleDateString("en-GB");return e.jsx(e.Fragment,{children:t&&e.jsxs("div",{className:"d-flex flex-column gap-3 mt-3  ",children:[e.jsx("div",{className:" ",children:t.banner&&e.jsx("img",{style:{maxHeight:"40vh"},className:"rounded w-100 h-100  border border-secondary",src:`${B}/uploads/banners/${t.banner}`,alt:t.company})}),e.jsxs("div",{className:"d-flex  gap-2 mb-3  align-items-center",children:[e.jsx("div",{style:{padding:"0"},children:t.companyLogo&&t.companyLogo.length>0&&e.jsx("img",{style:{width:"100px",height:"100px"},className:"rounded border border-secondary",src:`${B}/uploads/logos/${t.companyLogo}`,alt:t.company})}),e.jsx("div",{className:" fw-bold h3",children:t.company})]}),e.jsxs("div",{className:"row p-3 m-0 border border-success rounded",children:[e.jsxs("div",{className:"col-12 col-md-8 d-flex flex-column ",children:[e.jsx("div",{className:"h4",children:t.jobTitle}),e.jsxs("div",{children:[t.jobCategory,"/",t.subCategory]}),e.jsxs("div",{children:[e.jsx("span",{className:"pe-1",children:e.jsx(te,{size:"20px"})}),t.location]})]}),e.jsxs("div",{className:"col-12 col-md-4  d-flex flex-column gap-1",children:[e.jsxs("div",{children:[e.jsx("span",{children:e.jsx(ae,{size:"16px"})}),e.jsxs("span",{className:"ps-2",children:[t.rateperhour," ph"]})]}),e.jsx("div",{children:e.jsxs("span",{children:[e.jsx("span",{children:e.jsx(ne,{size:"16px"})}),e.jsx("span",{className:"ps-2",children:t.duration})]})}),e.jsx("div",{children:e.jsxs("span",{children:[e.jsx("span",{children:"Type:"}),e.jsx("span",{className:"ps-1",children:t.jobtype})]})}),e.jsx("div",{children:t.weeklyperhour&&e.jsxs("span",{children:[e.jsx("span",{children:"Weekly Hours:"}),e.jsx("span",{className:"ps-1",children:t.weeklyperhour})]})}),e.jsx("div",{children:t.numberofvacancies>1&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{onMouseOver:()=>x(!0,"vacancies"),onMouseLeave:N=>x(!1,"vacancies"),children:[e.jsx("span",{children:e.jsx(re,{size:"16px"})}),e.jsxs("span",{className:"ps-2",children:[t.numberofvacancies," Vacancies "]})]}),a.vacancies&&e.jsx("div",{className:"position-absolute bg-secondary mt-2 py-1 px-2 rounded text-white",children:"Vacancies"})]})}),e.jsx("div",{className:"",children:((f=t.training)==null?void 0:f.includes("true"))&&e.jsxs("span",{children:["Training Provided",e.jsx("span",{className:"ps-1",children:e.jsx(le,{size:"16px"})})]})}),e.jsx("div",{children:t.benifits&&e.jsx("div",{children:e.jsxs("div",{className:"d-flex",children:["Benefits:",((y=t.benifits)==null?void 0:y.includes("Accommodation"))&&e.jsx(T,{tooltipText:"Accommodation",children:e.jsx(ce,{size:"18px"})}),((p=t.benifits)==null?void 0:p.includes("Transport"))&&e.jsx(T,{tooltipText:"Transport",children:e.jsx(oe,{size:"18px"})}),((r=t.benifits)==null?void 0:r.includes("Food"))&&e.jsx(T,{tooltipText:"Food",children:e.jsx(de,{size:"18px"})})]})})})]}),e.jsxs("div",{children:[u," (",ie(u),")"]})]}),e.jsxs("div",{className:"row border border-success rounded m-0  p-3",children:[e.jsx("p",{children:me(he(t.description))}),e.jsxs("div",{className:"d-flex flex-column flex-md-row gap-2",children:[t.status!=="approved"&&e.jsx("button",{type:"button",onClick:()=>{m(t)},className:"btn btn-success mx-2",children:"Approve"}),t.status==="approved"&&e.jsx("button",{type:"button",disabled:!0,className:"btn btn-success mx-2",children:"Approved"}),t.status==="rejected"&&e.jsx("button",{type:"button",disabled:!0,className:"btn btn-danger mx-2",children:"Rejected"}),t.status!=="rejected"&&e.jsx("button",{type:"button",onClick:()=>{v(!0)},className:"btn btn-outline-danger mx-2",children:"Reject"}),t.reportReason&&e.jsxs("span",{className:"fw-bold mx-3 text-danger",children:["This job is reported due to  ",t.reportReason]})]})]}),t.youtubeUrl&&e.jsx("div",{children:e.jsx("iframe",{className:"rounded",width:"100%",height:"400px",src:`https://www.youtube.com/embed/${xe(t.youtubeUrl)}`,allowFullScreen:!0})})]})})}function ve({handleClose:t,job:m,userId:v}){const[a,h]=n.useState(""),[x,u]=n.useState("");let f=!0;function y(r){h(r.target.value),r.target.value==""?u("border border-red-500"):u("")}function p(r){if(a.trim()!==""){u("");const N={adminId:v,jobId:r._id,jobsDto:r};w.post("/jobs/reject",N).then(b=>{if(b&&b.status){const l={userId:r.companyId,jobId:r._id,jobTitle:r.jobTitle,status:"Rejected",isRead:!1,message:a,createdAt:Date.now()};return w.post("/notifications/create",l)}}).then(b=>{setTimeout(()=>{window.location.reload()},500)}).catch(b=>console.log(b))}else u("border border-red-500")}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"border p-3 bg-white shadow-sm rounded-lg",children:e.jsx(U,{show:f,onHide:t,centered:!0,children:e.jsxs(U.Body,{children:[e.jsx("label",{className:"font-bold text-center",children:"Mention why this job was rejected"}),e.jsx("div",{children:e.jsx("textarea",{className:"textarea w-100 shadow-sm "+x,value:a,onChange:r=>{y(r)},rows:"5",placeholder:"Type Here"})}),e.jsxs("div",{className:"px-5 flex justify-between py-2",children:[e.jsx("button",{className:"my-button button-reject",onClick:()=>p(m),children:"Reject"}),e.jsx("button",{className:"my-button button-cancel",onClick:t,children:"Cancel"})]})]})})})})}function we(){var b;const t=Q(),[m,v]=n.useState({}),[a,h]=n.useState({}),[x,u]=n.useState({}),f=R();function y(l){return l.toReversed()}const p=async(l=t.id)=>{try{const{data:g}=await w.get(`/mails/details/${l}`);v(g)}catch(g){f({status:"Error",error:g})}},r=()=>{const l={date:new Date,by:localStorage.getItem("role"),message:"",from:localStorage.getItem("fullname")};h(l),u({...x,showMessageBox:!0})};n.useEffect(()=>{document.title="Inbox",p()},[]);const N=async()=>{if(!M(a.message)){f({message:"Please write your message!"});return}u({...x,sendingReply:!0});try{await w.put(`/mails/reply/${m._id}`,a),u({showMessageBox:!1,sendingReply:!1}),h({}),p(m._id)}catch(l){u({...x,sendingReply:!1}),f({status:"error",error:l})}};return e.jsxs("div",{className:"content-wrapper bg-white container-fluid",children:[e.jsx("button",{onClick:()=>f({path:-1}),type:"button",className:"btn p-1 btn-dark btn-xs rounded-circle ",children:e.jsx(H,{fontSize:16})}),e.jsxs("div",{className:" mt-3 d-flex align-items-center",children:[e.jsx("h2",{className:" flex-grow-1 fw-bold fs-3 ",children:m==null?void 0:m.subject}),e.jsx("button",{onClick:r,disabled:x.showMessageBox,className:"btn btn-info rounded-4",children:"Reply"})]}),e.jsxs("div",{className:" mt-3 ",children:[x.showMessageBox&&e.jsxs("div",{className:"border-bottom p-3",children:[e.jsx("p",{className:"fw-bold fs-5 text-primary",children:a.from}),e.jsx("p",{children:I(a==null?void 0:a.date)}),e.jsxs("div",{className:" w-100 d-flex",children:[e.jsx("div",{className:"flex-grow-1",children:e.jsx(K,{value:a.message,setValue:l=>h({...a,message:l})})}),e.jsx("button",{type:"button",disabled:x.sendingReply,onClick:N,className:"btn btn-success align-self-end rounded p-2",children:e.jsx(Y,{fontSize:20})})]})]}),(m==null?void 0:m.chat)&&((b=y(m==null?void 0:m.chat))==null?void 0:b.map((l,g)=>e.jsxs("div",{className:" border-bottom  p-3",children:[e.jsx("p",{className:`fw-bold fs-5 ${l.from===localStorage.getItem("fullname")?"text-primary":"text-black"}`,children:l.from}),e.jsxs("p",{children:[I(l==null?void 0:l.date)," (",ue(new Date(l==null?void 0:l.date).toISOString()),")"]}),e.jsx("p",{className:"text-wrap",children:pe(l.message)})]})))]})]})}function Se(){const[t,m]=n.useState([]),[v,a]=n.useState(0),[h,x]=n.useState(!1),[u,f]=P(),[y,p]=n.useState(u.get("q")||""),[r,N]=n.useState(+u.get("page")||1),b=R(),l=Z(),{_id:g,role:o}=$(),j=async(d=r,s=y)=>{x(!0);const i=(d-1)*C;try{const c=await w.get(`/mails/all?q=${s}&limit=${C}&skip=${i}`);m(c.data.mails),a(c.data.total)}catch(c){b({status:"Error",error:c})}finally{x(!1)}},S=d=>{var s;(s=d==null?void 0:d.readBy)!=null&&s.includes(g)||l(ee()),b({path:`details/${d._id}`})},D=d=>{p(d.target.value),f(s=>(s.set("q",d.target.value),s.delete("page"),s)),N(1),j(1,d.target.value)};return n.useEffect(()=>{document.title="Admin Inbox",j()},[]),e.jsx("div",{className:"container-fluid  pt-3  bg-white",children:e.jsxs(_,{currentPage:r,totalCount:v,setCurrentPage:N,itemsPerPage:C,pageNumberToShow:2,fetchItems:j,children:[e.jsxs("div",{className:"d-flex flex-column flex-md-row",children:[e.jsx("h2",{className:"text-center flex-grow-1 fw-bold fs-4",children:"Inbox"}),e.jsx(X,{to:`/${o}/mail-admin`,className:"btn btn-info rounded-4",children:"New Mail"})]}),e.jsx("div",{className:"my-3",children:e.jsx("input",{type:"search",className:"form-control",placeholder:"Search inbox",value:y,onChange:d=>D(d)})}),h&&e.jsx(z,{}),!h&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table text-start table-hover mt-3",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",children:"Date"}),e.jsx("th",{children:"From"}),e.jsx("th",{children:"Subject"}),e.jsx("th",{children:"Message"})]})}),e.jsx("tbody",{children:t.length>0&&(t==null?void 0:t.map((d,s)=>{var i,c,F,J;return e.jsxs("tr",{role:"button",className:(i=d.readBy)!=null&&i.includes(g)?"":"fw-bold",onClick:()=>S(d),children:[e.jsx("td",{className:"text-center",children:I((c=d.chat[0])==null?void 0:c.date)}),e.jsx("td",{children:(F=d.chat[0])==null?void 0:F.from}),e.jsx("td",{className:"text-wrap",children:V(d==null?void 0:d.subject,40)}),e.jsx("td",{className:"text-wrap",children:V((J=d.chat[0])==null?void 0:J.message,50)})]},d._id)}))})]})})]})})}let L=100;function Ce(){const[t,m]=n.useState(""),[v,a]=n.useState([]),[h,x]=n.useState({}),[u,f]=n.useState(!1),[y,p]=n.useState(""),r=R(),[N]=n.useState(localStorage.getItem("role")),b=async()=>{try{const o=await w.get(`/users/admins/all?limit=${L}&skip=0`),j=o.data.admins.filter(S=>S._id!==je());a(j),x(j.length>0?j[0]:{}),o.data.total>L&&(L=o.data.total,b())}catch(o){r({status:"error",error:o})}};n.useEffect(()=>{document.title="Send Mail",b()},[]);const l=async()=>{if(!(h!=null&&h._id)){r({message:"Please select an admin to mail"});return}if(!M(y)){r({message:"Please provide subject for your mail"});return}if(!M(t)){r({message:"Please provide message for your mail"});return}f(!0),r({message:"Sending the mail..."});try{const o={subject:y,participants:[h._id],chat:[{date:new Date,from:localStorage.getItem("fullname"),message:t,by:localStorage.getItem("role")}]};await w.post("/mails/create",o),m(""),p(""),r({status:"success",message:"Mail sent",path:`/${N}/admin-inbox`})}catch(o){r({status:"error",error:o})}finally{f(!1)}},g=o=>{const j=v.find(S=>S._id===o.target.value);x(j)};return e.jsxs("div",{className:"container-fluid pt-4 bg-white",children:[e.jsx("button",{onClick:()=>r({path:-1}),type:"button",className:"btn p-1 btn-dark btn-xs rounded-circle ",children:e.jsx(H,{fontSize:16})}),e.jsx("h2",{className:"fw-bold flex-grow-1 fs-4 text-center",children:"Mail an Admin"}),e.jsxs("div",{className:"d-flex flex-column gap-5",children:[e.jsxs("div",{className:" row mt-2",children:[e.jsx("div",{className:"col-lg-3",children:e.jsx("label",{className:"form-label",children:" Select an admin to message"})}),e.jsx("div",{className:"col-lg-9",children:e.jsx("select",{onChange:g,value:h==null?void 0:h._id,disabled:u,className:"form-select",children:v.length>0&&v.map(o=>e.jsx("option",{value:o._id,children:o.first_name+" "+o.last_name},o._id))})})]}),e.jsxs("div",{className:" row",children:[e.jsx("div",{className:"col-lg-3",children:e.jsx("label",{className:"form-label",children:" Subject"})}),e.jsx("div",{className:"col-lg-9",children:e.jsx("input",{type:"text",className:"form-control",value:y,onChange:o=>p(o.target.value),disabled:u,placeholder:"Subject"})})]}),e.jsxs("div",{className:" ",children:[e.jsx("label",{className:"form-label ",children:" Message"}),e.jsx("div",{className:"",children:e.jsx(K,{value:t,setValue:m})})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn btn-info rounded-4",disabled:u,onClick:l,children:"Send"})})]})]})}function Te(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M4.99787498,6.99999999 L4.99787498,0.999999992 L19.4999998,0.999999992 L22.9999998,4.50000005 L23,23 L17,23 M18,1 L18,6 L23,6 M10,23 C13.8659932,23 17,19.8659932 17,16 C17,12.1340068 13.8659932,9 10,9 C6.13400675,9 3,12.1340068 3,16 C3,19.8659932 6.13400675,23 10,23 Z M10,12 L10,16 L13,19"},child:[]}]})(t)}const E={toDate:"",fromDate:"",jobId:"",employerReference:"",jobTitle:""};function De(){const[t,m]=n.useState(0),[v]=P(),[a,h]=n.useState(E),[x,u]=n.useState(+v.get("page")||1),[f,y]=n.useState([]),p=R(),[r,N]=n.useState(!1),b=n.useRef(null),{role:l}=$(),g=async s=>{const i=(s-1)*C;N(!0);try{const c=await w.post(`/audit/logs?limit=${C}&skip=${i}`,a);y(c.data.logs),m(c.data.total)}catch(c){p({status:"Error",error:c})}finally{N(!1)}},o=s=>[I(s.date),s.companyId,s.companyName,s.jobId?s.jobId:"-",s.employerReference?s.employerReference:"-",s.jobTitle?s.jobTitle:"-",s.username?s.username:"-",s.email?s.email:"-",s.description?s.description:"-",s.fieldName?s.fieldName:"-",s.changedFrom?s.changedFrom:"-",s.changedTo?s.changedTo:"-"].join(",")+`
`,j=s=>{h({...a,[s.target.name]:s.target.value})},S=()=>{if(a.toDate&&a.fromDate>a.toDate){p({message:"From date can't be more than to date"});return}window.history.replaceState(null,null,`/${l}/audit`),g(1)},D=async(s=1e3)=>{document.body.style.cursor="wait";try{const i=await w.post(`/audit/logs?limit=${s}&skip=0`,E);s<i.data.total&&D(i.data.total);let c=`Date,Company ID,Company Name,Job ID,Employer Reference,Job Title,User Name,Email,Description,Field Name,Changed From,Changed To 
`;i.data.logs.forEach(F=>{c+=o(F)}),k(c,"all-logs")}catch(i){p({status:"Error",error:i})}finally{document.body.style.cursor="auto"}},d=async()=>{document.body.style.cursor="wait";try{const s=await w.post(`/audit/logs?limit=${t}&skip=0`,a);let i=`Date,Company ID,Company Name,Job ID,Employer Reference,Job Title,User Name,Email,Description,Field Name,Changed From,Changed To 
`;s.data.logs.forEach(c=>{i+=o(c)}),k(i,"logs")}catch(s){p({status:"Error",error:s})}finally{document.body.style.cursor="auto"}};return n.useEffect(()=>{g(x),document.title="Audits Logs"},[]),e.jsxs("div",{className:"container-fluid pt-4 bg-white",children:[e.jsxs("div",{className:"d-flex flex-column flex-md-row",children:[e.jsx("h2",{className:"text-center w-100 fw-bold fs-3 mb-3",children:" Audit Log"}),e.jsx("button",{type:"button",onClick:()=>D(),className:"btn text-nowrap  btn-info rounded-4",children:"Download All"})]}),e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"d-flex flex-column flex-md-row gap-2 my-3 small",children:[e.jsxs("div",{className:"d-flex flex-column align-items-start",children:[e.jsx("label",{children:"From Date"}),e.jsx("input",{type:"date",name:"fromDate",className:"form-control",value:a.fromDate,onChange:j})]}),e.jsxs("div",{className:"d-flex flex-column align-items-start",children:[e.jsx("label",{children:"To Date"}),e.jsx("input",{type:"date",name:"toDate",className:"form-control",value:a.toDate,onChange:j})]}),e.jsxs("div",{className:"d-flex flex-column flex-md-row align-self-md-end flex-grow-1 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Job Title",className:"form-control ",name:"jobTitle",value:a.jobTitle,onChange:j}),e.jsx("input",{type:"text",placeholder:"Employer Reference",className:"form-control ",name:"employerReference",value:a.employerReference,onChange:j}),e.jsx("input",{type:"text",placeholder:"Job ID",className:"form-control",name:"jobId",value:a.jobId,onChange:j}),e.jsxs("div",{className:"d-flex justify-content-evenly align-items-center gap-3",children:[e.jsx(T,{tooltipText:"Apply",children:e.jsx("span",{onClick:S,children:e.jsx(W,{color:"green",fontSize:20})})}),e.jsx(T,{tooltipText:"Clear",children:e.jsx("span",{onClick:()=>{h(E)},children:e.jsx(O,{color:"red",fontSize:20})})}),e.jsx(T,{tooltipText:"Download",rightAlign:!0,children:e.jsx("span",{onClick:()=>d(),children:e.jsx(q,{fontSize:20})})})]})]})]})}),e.jsx(_,{itemsPerPage:C,currentPage:x,pageNumberToShow:2,setCurrentPage:u,fetchItems:g,totalCount:t,children:e.jsxs("div",{className:"table-responsive",children:[r&&e.jsx("div",{className:"container",children:e.jsx(z,{})}),!r&&f.length>0&&e.jsxs("table",{ref:b,className:"text-center my-table mt-2  text-wrap",children:[e.jsx("thead",{className:"small",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Company ID"}),e.jsx("th",{children:"Company Name"}),e.jsx("th",{children:"Job ID"}),e.jsx("th",{children:"Employer Reference"}),e.jsx("th",{children:"Job Title"}),e.jsx("th",{children:"User Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Field Name"}),e.jsx("th",{children:"Changed From"}),e.jsx("th",{children:"Changed To"})]})}),e.jsx("tbody",{children:f.map(s=>e.jsxs("tr",{style:{fontSize:"12px"},className:"border rounded border-secondary border-0 border-top",children:[e.jsx("td",{children:I(s.date)}),e.jsx("td",{className:"small",children:s.user_id}),e.jsx("td",{children:s.name}),e.jsxs("td",{className:"small",children:[s.jobId?s.jobId:"-"," "]}),e.jsxs("td",{children:[s.employerReference?s.employerReference:"-"," "]}),e.jsxs("td",{children:[s.jobTitle?s.jobTitle:"-"," "]}),e.jsxs("td",{children:[s.username?s.username:"-"," "]}),e.jsxs("td",{children:[s.email?s.email:"-"," "]}),e.jsxs("td",{className:"text-capitalize",children:[s.description?s.description:"-"," "]}),e.jsxs("td",{className:"text-capitalize",children:[s.fieldName?s.fieldName:"-"," "]}),e.jsxs("td",{children:[s.changedFrom?e.jsx(G,{content:s.changedFrom}):"-"," "]}),e.jsxs("td",{children:[s.changedTo?e.jsx(G,{content:s.changedTo}):"-"," "]})]},s._id))})]})]})})]})}const A={toDate:"",fromDate:"",jobId:"",employerReference:"",jobTitle:""};function Ie(){const[t,m]=n.useState(0),[v]=P(),[a,h]=n.useState(A),[x,u]=n.useState(+v.get("page")||1),[f,y]=n.useState([]),p=R(),[r,N]=n.useState(!1),b=n.useRef(null),{role:l}=$(),g=async s=>{const i=(s-1)*C;N(!0);try{const c=await w.post(`/audit/admin/logs?limit=${C}&skip=${i}`,a);y(c.data.logs),m(c.data.total)}catch(c){p({status:"Error",error:c})}finally{N(!1)}},o=s=>[I(s.date),s.jobId?s.jobId:"-",s.employerReference?s.employerReference:"-",s.jobTitle?s.jobTitle:"-",s.name?s.name:"-",s.email?s.email:"-",s.description?s.description:"-",s.fieldName?s.fieldName:"-",s.changedFrom?s.changedFrom:"-",s.changedTo?s.changedTo:"-"].join(",")+`
`,j=s=>{h({...a,[s.target.name]:s.target.value})},S=()=>{if(a.toDate&&a.fromDate>a.toDate){p({message:"From date can't be more than to date"});return}window.history.replaceState(null,null,`/${l}/audit`),g(1)},D=async(s=1e3)=>{document.body.style.cursor="wait";try{const i=await w.post(`/audit/admin/logs?limit=${s}&skip=0`,A);s<i.data.total&&D(i.data.total);let c=`Date,Job ID,Employer Reference,Job Title,User Name,Email,Description,Field Name,Changed From,Changed To 
`;i.data.logs.forEach(F=>{c+=o(F)}),k(c,"logs")}catch(i){p({status:"Error",error:i})}finally{document.body.style.cursor="auto"}},d=async()=>{document.body.style.cursor="wait";try{const s=await w.post(`/audit/admin/logs?limit=${t}&skip=0`,a);let i=`Date,Job ID,Employer Reference,Job Title,User Name,Email,Description,Field Name,Changed From,Changed To 
`;s.data.logs.forEach(c=>{i+=o(c)}),k(i,"logs")}catch(s){p({status:"Error",error:s})}finally{document.body.style.cursor="auto"}};return n.useEffect(()=>{g(x),document.title="Admin-Logs"},[]),e.jsxs("div",{className:"container-fluid  pt-4 bg-white",children:[e.jsxs("div",{className:"d-flex flex-column flex-md-row align-items-center",children:[e.jsx("h2",{className:"text-center w-100 fw-bold fs-3 mb-3",children:" Admin Logs"}),e.jsx("button",{type:"button",onClick:()=>D(),className:"btn text-nowrap  btn-info rounded-4",children:"Download All"})]}),e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"d-flex flex-column flex-md-row gap-2 my-3 small",children:[e.jsxs("div",{className:"d-flex flex-column align-items-start",children:[e.jsx("label",{children:"From Date"}),e.jsx("input",{type:"date",name:"fromDate",className:"form-control",value:a.fromDate,onChange:j})]}),e.jsxs("div",{className:"d-flex flex-column align-items-start",children:[e.jsx("label",{children:"To Date"}),e.jsx("input",{type:"date",name:"toDate",className:"form-control",value:a.toDate,onChange:j})]}),e.jsxs("div",{className:"d-flex flex-column flex-md-row align-self-md-end flex-grow-1 gap-2",children:[e.jsx("input",{type:"text",placeholder:"Job Title",className:"form-control ",name:"jobTitle",value:a.jobTitle,onChange:j}),e.jsx("input",{type:"text",placeholder:"Employer Reference",className:"form-control ",name:"employerReference",value:a.employerReference,onChange:j}),e.jsx("input",{type:"text",placeholder:"Job ID",className:"form-control",name:"jobId",value:a.jobId,onChange:j}),e.jsxs("div",{className:"d-flex align-items-center justify-content-evenly gap-3",children:[e.jsx(T,{tooltipText:"Apply",children:e.jsx("span",{onClick:S,children:e.jsx(W,{color:"green",fontSize:20})})}),e.jsx(T,{tooltipText:"Clear",children:e.jsx("span",{onClick:()=>{h(A)},children:e.jsx(O,{color:"red",fontSize:20})})}),e.jsx(T,{tooltipText:"Download",rightAlign:!0,children:e.jsx("span",{onClick:()=>d(),children:e.jsx(q,{fontSize:20})})})]})]})]}),e.jsx(_,{itemsPerPage:C,currentPage:x,pageNumberToShow:2,setCurrentPage:u,fetchItems:g,totalCount:t,children:e.jsxs("div",{className:"table-responsive",children:[r&&e.jsx("div",{className:"container",children:e.jsx(z,{})}),!r&&f.length>0&&e.jsxs("table",{ref:b,className:"text-center w-100 my-table mt-2  text-wrap",children:[e.jsx("thead",{className:"small",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Job ID"}),e.jsx("th",{children:"Employer Reference"}),e.jsx("th",{children:"Job Title"}),e.jsx("th",{children:"User Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Field Name"}),e.jsx("th",{children:"Changed From"}),e.jsx("th",{children:"Changed To"})]})}),e.jsx("tbody",{children:f.map(s=>e.jsxs("tr",{style:{fontSize:"12px"},className:"border rounded border-secondary border-0 border-top",children:[e.jsx("td",{children:I(s.date)}),e.jsxs("td",{className:"small",children:[s.jobId?s.jobId:"-"," "]}),e.jsxs("td",{children:[s.employerReference?s.employerReference:"-"," "]}),e.jsxs("td",{children:[s.jobTitle?s.jobTitle:"-"," "]}),e.jsxs("td",{children:[s.name?s.name:"-"," "]}),e.jsxs("td",{children:[s.email?s.email:"-"," "]}),e.jsxs("td",{className:"text-capitalize",children:[s.description?s.description:"-"," "]}),e.jsxs("td",{className:"text-capitalize",children:[s.fieldName?s.fieldName:"-"," "]}),e.jsxs("td",{style:{wordBreak:"break-all"},className:"text-wrap",children:[s.changedFrom?s.changedFrom:"-"," "]}),e.jsxs("td",{style:{wordBreak:"break-all"},className:"text-wrap",children:[s.changedTo?s.changedTo:"-"," "]})]},s._id))})]})]})})]})]})}export{Ne as A,we as C,Te as G,Se as I,Ce as M,ve as R,De as a,Ie as b};
